<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Certificat ‚Äî SAMS</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/visite.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="css/navbar-anim.css">
  <style>
    /* small page-specific tweaks */
    .deces-card{ max-width:980px; margin:1.25rem auto; }
    .certificate-placeholder{ height:820px; border:2px dashed rgba(0,0,0,0.06); border-radius:8px; background:#fff; display:flex; align-items:center; justify-content:center; overflow:hidden }
    .certificate-placeholder img{ width:100%; height:100%; object-fit:contain; display:block }
    @media (max-width:900px){ .certificate-placeholder{ height:520px } }
  </style>
</head>
<body class="animate-page">
      <nav class="site-navbar">
    <div class="container d-flex align-items-center justify-content-between">
      <div class="brand">
        <div>
          <div class="title">SAMS</div>
          <div style="font-size:0.85rem;opacity:0.9">Certificat ‚Äî D√©c√®s</div>
        </div>
      </div>
      <div class="d-flex align-items-center" style="gap:1rem">
        <a href="index.html" class="text-white mr-3" title="R√®glement"><i class="fa fa-book nav-icon" aria-hidden="true"></i>R√®glement</a>
        <a href="Visite_Medical.html" class="text-white mr-3" title="Visite M√©dicale"><i class="fa fa-stethoscope nav-icon" aria-hidden="true"></i>Visite</a>
  <a href="psy.html" class="text-white mr-3" title="Psychologie"><i class="fa fa-brain nav-icon" aria-hidden="true"></i>Psychologie</a>
        <button id="themeToggle" class="theme-toggle" aria-label="Basculer th√®me">üåô</button>
      </div>
    </div>
  </nav>

  <main class="page-wrapper">
    <section class="med-card visite-card deces-card">
      <div class="card-header-visite">
        <div class="card-header-left">
          <img src="./media/logo_pillbox.svg" alt="Logo" class="visite-logo" onerror="this.style.display='none'">
        </div>
        <div class="card-header-center">
          <div class="visite-title">CERTIFICAT DE D√âC√àS</div>
        </div>
        <div class="card-header-right" aria-hidden="true"></div>
      </div>

      <div class="card-top-bar">
        <div class="card-top-title">VOLET ADMINISTRATIF</div>
      </div>

      <form id="visiteForm" class="visite-form">
        <!-- Administrative / declaration -->
        <div class="section-title">VOLET ADMINISTRATIF ‚Äî D√âCLARATION</div>
        <div class="form-row mt-3">
          <div class="col-md-6 mb-2">
            <label class="label">M√©decin d√©clarant (nom et pr√©nom)</label>
            <input type="text" name="medecin_declarant" class="form-control visite-input" placeholder="Nom du m√©decin">
          </div>
          <div class="col-md-6 mb-2">
            <label class="label">Date et heure du d√©c√®s (estim√©e ou constat√©e)</label>
            <input type="datetime-local" name="date_heure_deces" class="form-control visite-input">
          </div>
        </div>
        <div class="form-row">
          <div class="col-md-8 mb-2">
            <label class="label">Lieu du constat</label>
            <input type="text" name="lieu_constat" class="form-control visite-input" placeholder="H√¥pital, adresse, etc.">
          </div>
          <div class="col-md-4 mb-2">
            <label class="label">Situation constat</label>
            <input type="text" name="situation_constat" class="form-control visite-input" placeholder="(ex: sur place, √† domicile)">
          </div>
        </div>

        <!-- Civil information -->
        <div class="section-title">√âTAT CIVIL DU D√âFUNT</div>
        <div class="form-row mt-3">
          <div class="col-md-4 mb-2">
            <label class="label">Nom</label>
            <input type="text" name="nom" class="form-control visite-input" placeholder="Nom">
          </div>
          <div class="col-md-4 mb-2">
            <label class="label">Pr√©nom</label>
            <input type="text" name="prenom" class="form-control visite-input" placeholder="Pr√©nom">
          </div>
          <div class="col-md-4 mb-2">
            <label class="label">Date de naissance</label>
            <input type="date" name="dob" class="form-control visite-input">
          </div>
        </div>
        <div class="form-row">
          <div class="col-md-6 mb-2">
            <label class="label">Lieu du d√©c√®s</label>
            <input type="text" name="lieu_deces" class="form-control visite-input" placeholder="Ville / H√¥pital">
          </div>
          <div class="col-md-6 mb-2">
            <label class="label">Sexe</label>
            <div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="sexe" id="sexeM" value="M"><label class="form-check-label" for="sexeM">Masculin</label></div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="sexe" id="sexeF" value="F"><label class="form-check-label" for="sexeF">F√©minin</label></div>
            </div>
          </div>
        </div>

        <!-- Funeral / medico-legal information -->
        <div class="section-title">INFORMATIONS FUN√âRAIRES / M√âDICO-L√âGALES</div>
        <div class="form-row mt-3">
          <div class="col-md-6 mb-2">
            <label class="label">Obstacle m√©dico-l√©gal</label>
            <div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="obstacleOui" name="obstacle_medico" value="oui"><label class="form-check-label" for="obstacleOui">Oui</label></div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="obstacleNon" name="obstacle_medico_non" value="non"><label class="form-check-label" for="obstacleNon">Non</label></div>
            </div>
          </div>
          <div class="col-md-6 mb-2">
            <label class="label">Obligation au don du corps √† la science</label>
            <div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="donOui" name="don_science" value="oui"><label class="form-check-label" for="donOui">Oui</label></div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="donNon" name="don_science_non" value="non"><label class="form-check-label" for="donNon">Non</label></div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="col-md-6 mb-2">
            <label class="label">Recherche de la cause du d√©c√®s / autopsie</label>
            <div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="rechOui" name="recherche_cause" value="oui"><label class="form-check-label" for="rechOui">Oui</label></div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="rechNon" name="recherche_cause_non" value="non"><label class="form-check-label" for="rechNon">Non</label></div>
            </div>
          </div>
          <div class="col-md-6 mb-2">
            <label class="label">D√©lai si transport du corps n√©cessaire</label>
            <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="delai48" name="delai_transport" value="48h"><label class="form-check-label" for="delai48">48H</label></div>
            <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="delai72" name="delai_transport_72" value="72h"><label class="form-check-label" for="delai72">72H</label></div>
          </div>
        </div>

        <div class="form-row">
          <div class="col-md-6 mb-2">
            <label class="label">Pr√©sence identifi√©e au moment du d√©c√®s</label>
            <div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="presOui" name="presence_identifiee" value="oui"><label class="form-check-label" for="presOui">Oui</label></div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="presNon" name="presence_identifiee_non" value="non"><label class="form-check-label" for="presNon">Non</label></div>
            </div>
          </div>

          <div class="col-md-6 mb-2">
            <label class="label">Proth√®se pr√©sente / pile (pacemaker)</label>
            <div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="prothOui" name="prothese" value="oui"><label class="form-check-label" for="prothOui">Oui</label></div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="prothNon" name="prothese_non" value="non"><label class="form-check-label" for="prothNon">Non</label></div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="col-12 mb-2">
            <label class="label">Observations compl√©mentaires / recherche</label>
            <textarea name="observations" class="form-control visite-input" rows="4"></textarea>
          </div>
        </div>

        <!-- RAPPORT D'AUTOPSIE (visuel header like certificate) -->
        <div class="card-header-visite" style="margin-top:1.25rem">
          <div class="card-header-left" aria-hidden="true"><!-- spacer to keep title centered; logo removed --></div>
          <div class="card-header-center">
            <div class="visite-title">RAPPORT D'AUTOPSIE</div>
          </div>
          <div class="card-header-right" aria-hidden="true"></div>
        </div>
        <div class="card-top-bar">
          <div class="card-top-title">INFORMATIONS G√âN√âRALES DU D√âFUNT</div>
        </div>
        <div class="form-row mt-3">
          <div class="col-md-4 mb-2">
            <label class="label">Rapport N¬∞</label>
            <input type="text" name="rapport_num" class="form-control visite-input" placeholder="N¬∞ Rapport">
          </div>
          <div class="col-md-4 mb-2">
            <label class="label">Date de l'autopsie</label>
            <input type="date" name="date_autopsie" class="form-control visite-input">
          </div>
          <div class="col-md-4 mb-2">
            <label class="label">Lieu de l'autopsie</label>
            <input type="text" name="lieu_autopsie" class="form-control visite-input" placeholder="H√¥pital / Institut">
          </div>
        </div>

        <div class="section-sub">INFORMATIONS G√âN√âRALES DU D√âFUNT</div>
        <div class="form-row mt-2">
          <div class="col-md-6 mb-2">
            <label class="label">Identit√© du d√©funt</label>
            <input type="text" name="identite_defunt" class="form-control visite-input" placeholder="Nom, Pr√©nom">
          </div>
          <div class="col-md-2 mb-2">
            <label class="label">Sexe</label>
            <div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="aut_sexe" id="aut_sexeM" value="M"><label class="form-check-label" for="aut_sexeM">M</label></div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="aut_sexe" id="aut_sexeF" value="F"><label class="form-check-label" for="aut_sexeF">F</label></div>
            </div>
          </div>
          <div class="col-md-4 mb-2">
            <label class="label">Date et heures pr√©sum√©e du d√©c√®s</label>
            <input type="text" name="aut_date_presumee" class="form-control visite-input" placeholder="__/__/____ √† __:__">
          </div>
        </div>
        <div class="form-row">
          <div class="col-md-6 mb-2">
            <label class="label">Lieu de d√©couverte du corps</label>
            <input type="text" name="lieu_decouverte" class="form-control visite-input">
          </div>
          <div class="col-md-6 mb-2">
            <label class="label">R√©f√©rent judiciaire</label>
            <input type="text" name="referent_judiciaire" class="form-control visite-input" placeholder="Nom de l'officier/enqu√™teur">
          </div>
        </div>

        <div class="section-sub">EXPERTISE DU D√âFUNT</div>
        <div class="form-row mt-2">
          <div class="col-md-6 mb-2">
            <label class="label">√âtat g√©n√©ral du corps</label>
            <div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="etatIntact" name="etat_corps_intact" value="intact"><label class="form-check-label" for="etatIntact">Intact</label></div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="etatBless" name="etat_corps_blessures" value="blessures"><label class="form-check-label" for="etatBless">Pr√©sence de blessures visibles</label></div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="etatDecomp" name="etat_corps_decomp" value="decomposition"><label class="form-check-label" for="etatDecomp">D√©composition partielle</label></div>
            </div>
          </div>
          <div class="col-md-6 mb-2">
            <label class="label">V√™tements port√©s</label>
            <input type="text" name="vetements_portes" class="form-control visite-input">
          </div>
        </div>

        <div class="form-row">
          <div class="col-md-6 mb-2">
            <label class="label">Pr√©sence de tatouages / signes distinctifs</label>
            <div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="tatouages" id="tatOui" value="oui"><label class="form-check-label" for="tatOui">Oui</label></div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="tatouages" id="tatNon" value="non"><label class="form-check-label" for="tatNon">Non</label></div>
            </div>
          </div>
          <div class="col-md-6 mb-2">
            <label class="label">Blessures visibles externes</label>
            <input type="text" name="blessures_visibles" class="form-control visite-input">
          </div>
        </div>

        <div class="form-row">
          <div class="col-12 mb-2">
            <label class="label">Cause(s) du d√©c√®s (cocher ce qui s'applique)</label>
            <div class="d-flex flex-wrap">
              <div class="form-check mr-3"><input class="form-check-input" type="checkbox" id="cause1" name="cause_deces[]" value="arret_cardiaque"><label class="form-check-label" for="cause1">Arr√™t cardiaque</label></div>
              <div class="form-check mr-3"><input class="form-check-input" type="checkbox" id="cause2" name="cause_deces[]" value="asphyxie"><label class="form-check-label" for="cause2">Asphyxie</label></div>
              <div class="form-check mr-3"><input class="form-check-input" type="checkbox" id="cause3" name="cause_deces[]" value="hemorragie_interne"><label class="form-check-label" for="cause3">H√©morragie interne</label></div>
              <div class="form-check mr-3"><input class="form-check-input" type="checkbox" id="cause4" name="cause_deces[]" value="overdose"><label class="form-check-label" for="cause4">Overdose</label></div>
              <div class="form-check mr-3"><input class="form-check-input" type="checkbox" id="cause5" name="cause_deces[]" value="traumatisme_cranien"><label class="form-check-label" for="cause5">Traumatisme cr√¢nien s√©v√®re</label></div>
              <div class="form-check mr-3"><input class="form-check-input" type="checkbox" id="causeOtherChk" name="cause_deces[]" value="autre"><label class="form-check-label" for="causeOtherChk">Autre</label></div>
              <input type="text" name="cause_deces_autre" class="form-control visite-input ml-3" placeholder="Pr√©cisez si autre" style="max-width:320px">
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="col-md-6 mb-2">
            <label class="label">Pr√©sence de substances toxiques ou stup√©fiants dans le sang</label>
            <div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="substances" id="subOui" value="oui"><label class="form-check-label" for="subOui">Oui</label></div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="substances" id="subNon" value="non"><label class="form-check-label" for="subNon">Non</label></div>
            </div>
          </div>
          <div class="col-md-6 mb-2">
            <label class="label">Organes endommag√©s / anomalies constat√©es</label>
            <input type="text" name="organes_endommages" class="form-control visite-input">
          </div>
        </div>

        <div class="form-row">
          <div class="col-md-12 mb-2">
            <label class="label">Nature du d√©c√®s</label>
            <div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="nature_deces" id="nat1" value="naturelle"><label class="form-check-label" for="nat1">Mort naturelle</label></div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="nature_deces" id="nat2" value="accidentelle"><label class="form-check-label" for="nat2">Mort accidentelle</label></div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="nature_deces" id="nat3" value="homicide"><label class="form-check-label" for="nat3">Homicide</label></div>
              <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="nature_deces" id="nat4" value="suicide"><label class="form-check-label" for="nat4">Suicide</label></div>
            </div>
          </div>
        </div>

        <div class="section-sub">CONCLUSION M√âDICO-L√âGALES</div>
        <div class="form-row mt-2">
          <div class="col-12 mb-2">
            <label class="label">Observations compl√©mentaires</label>
            <textarea name="conclusion_observations" class="form-control visite-input" rows="4"></textarea>
          </div>
        </div>

        <div class="form-actions">
          <button id="previewBtn" type="button" class="btn btn-info"><i class="fa fa-eye"></i> Pr√©visualiser</button>
          <button id="downloadPdf" type="button" class="btn btn-secondary"><i class="fa fa-download"></i> T√©l√©charger PDF</button>
          <button type="submit" class="btn btn-primary">Enregistrer</button>
        </div>
      </form>
    </section>
  </main>

  <script src="js/theme.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    // Ensure jsPDF global normalization like other pages
    (function(){ try{ if(window.jspdf && window.jspdf.jsPDF && !window.jsPDF){ window.jsPDF = window.jspdf.jsPDF; } if(!window.jsPDF && window.JSPDF){ window.jsPDF = window.JSPDF; } }catch(e){ console.warn('jsPDF normalization failed', e); }})();
  </script>
  <script src="js/visite.js" defer></script>
</body>
</html>
